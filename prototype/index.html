<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-signin-client_id" content="845263629251-d96jdemhk478lcgnnio16hg7u7htqsp4.apps.googleusercontent.com">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel = "stylesheet" href = "index.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <title>Recipe App</title>
</head>

<body>

    <nav class="w3-sidebar w3-bar-block w3-card w3-top w3-xlarge w3-animate-left" style="display:none;z-index:2;width:40%;min-width:300px" id="mySidebar">
        <a href="javascript:void(0)" onclick="w3_close()"
        class="w3-bar-item w3-button">Close Menu</a>
        <a href="#Cart" onclick="w3_close()" class="w3-bar-item w3-button">cart</a>
        <a href="#Saved Recipes" onclick="w3_close()" class="w3-bar-item w3-button">saved recipes</a>
      </nav>


      <div class="w3-top">
        <div class="w3-white w3-xlarge" style="max-width:1200px;margin:auto">
          <div class="w3-button w3-padding-16 w3-left" onclick="w3_open()">â˜°</div>
          <div class="w3-center w3-padding-16">ChefCart</div>
        </div>
      </div>
    
<div class="w3-main w3-content w3-padding" style="max-width:1200px;margin-top:100px">
    <p>
        The ChefCart is designed to make following recipes easy. Simply import the recipe website you wish to follow,
        and ChefCart will buy the ingredients for you!
    </p>
    <!-- <input id="search"><button onclick="getrecipe(document.getElementById('search').value)">Search</button> -->
    <!-- <input id="recipe_url"><button onclick="getIngredients()">Recipe URL</button> -->

    <input id="recipe_url"><button onclick="getIngredients()">Recipe URL</button>
        <div id="output"></div>
        <a href="" id="sourceLInk"></a>
        
        <!-- <button id="recipe_search" onclick="getIngredients()">Get Ingredients</button> -->

        <p id="output_ingredients"></p>
    <!-- <button id="recipe_search" onclick="getIngredients()">Get Ingredients</button> -->
    <div class="topnav">
        <a class="active" href="/index.html">Home</a>
        <a href="/spoonacular.html">Search Recipe</a>
      </div>
    <div class="g-signin2" data-onsuccess="onSignIn"></div>

    <div class = "data">
        <p>Name</p>
        <p id = "alert alert-succes"></p>
        <p>Profile Picture</p>
        <img id="image" class="rounded-circle" width ="100" height = "100" />
        <p>Email</p>
        <p id = "email"></p>
        <button type = "button" class = "btn btn-danger" onclick = "signOut();">Sign Out</button>
        </div>
    
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>

        .topnav input[type=text] {
        float: right;
        padding: 6px;
    margin-top: 8px;
    margin-right: 16px;
    border: none;
    font-size: 17px;
        }

</style>
</head>
</div>

    <script src="index.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</body>

<!-- JS Scripts -->
<script>
    var ingredients_list =[];
    var api_key = "2286de97d678461f978e94c67082597d";
    var recipe_id = "";
    function search_recipe(){
        var input = document.getElementById("recipe_url").value;
        input = input.split('/')[4];
        input = input.split('-');
        input_length = input.length - 1;
        input = input[input_length];
        recipe_id = input;

    }
    function getIngredients(){
        // search_recipe();
        // $.get("https://api.spoonacular.com/recipes/" + recipe_id + "/information?apiKey=" + api_key+ "&includeNutrition=true", 
        // function(data, status){
        //     reset_ingredients_list();
        //     for (let i = 0; i < JSON.stringify(data['extendedIngredients']).length; i++){

        //         if (JSON.stringify(data['extendedIngredients'][i]['name']) != ""){
        //             ingredients_list.push(JSON.stringify(data['extendedIngredients'][i]['name']).replace(/\"/g, ""));
        //             document.getElementById('output_ingredients').innerHTML = ingredients_list;

        //         }
        //     }
        // });

        $.get("https://api.spoonacular.com/recipes/1697687/information?apiKey=2286de97d678461f978e94c67082597d&includeNutrition=true", 
        function(data, status){
            reset_ingredients_list();
            for (let i = 0; i < JSON.stringify(data['extendedIngredients']).length; i++){

                if (JSON.stringify(data['extendedIngredients'][i]['name']) != ""){
                    ingredients_list.push(JSON.stringify(data['extendedIngredients'][i]['name']).replace(/\"/g, ""));
                    document.getElementById('output_ingredients').innerHTML = ingredients_list;

                }
            }
        });
    }
    function reset_ingredients_list(){
        ingredients_list = [];
    }
    
</script>
</html>
